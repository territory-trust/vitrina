<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–ª–æ–±–∞–ª—å–Ω–∏–π –†–æ–∑–≤—ñ–¥–Ω–∏–∫ 1000+</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="config.js"></script>
    <style>
        :root { --bg: #0d0f12; --olive: #556b2f; --text: #d1d5db; }
        body { background: var(--bg); color: var(--text); font-family: sans-serif; padding: 0; margin: 0; text-align: center; }
        
        /* –ù–∞–≤—ñ–≥–∞—Ü—ñ—è */
        .system-nav { background: #000; padding: 10px; display: flex; justify-content: center; gap: 10px; border-bottom: 1px solid #333; margin-bottom: 20px; }
        .sys-btn { text-decoration: none; color: #888; font-size: 14px; padding: 8px 15px; border-radius: 6px; border: 1px solid #333; }
        .sys-btn:hover { color: #fff; border-color: var(--olive); }
        .sys-btn.active { background: var(--olive); color: #fff; border-color: var(--olive); }

        .panel { background: #14171c; padding: 30px; border-radius: 20px; border: 1px solid var(--olive); max-width: 500px; margin: auto; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        select { width: 100%; padding: 18px; border-radius: 12px; background: #000; color: #fff; border: 1px solid #333; margin-bottom: 20px; font-size: 16px; outline: none; }
        
        .btn { background: linear-gradient(180deg, var(--olive) 0%, #3e4e22 100%); color: white; padding: 22px; border: none; width: 100%; border-radius: 16px; font-weight: bold; cursor: pointer; text-transform: uppercase; font-size: 18px; letter-spacing: 1px; box-shadow: 0 5px 0 #2b3815; transition: 0.1s; }
        .btn:active { transform: translateY(5px); box-shadow: none; }

        #log { margin-top: 25px; background: #000; padding: 15px; border-radius: 12px; color: #00ff41; height: 200px; overflow-y: auto; text-align: left; font-family: monospace; font-size: 13px; border: 1px solid #333; }
        
        .next-step { display:block; margin-top:25px; color:var(--olive); text-decoration:none; font-weight:bold; font-size: 18px; border: 1px solid var(--olive); padding: 15px; border-radius: 10px; }
        .next-step:hover { background: rgba(85, 107, 47, 0.2); }
    </style>
</head>
<body>

    <div class="system-nav">
        <a href="index.html" class="sys-btn">üè† –í–Ü–¢–†–ò–ù–ê</a>
        <a href="scout_mta.html" class="sys-btn active">üïµÔ∏è –†–û–ó–í–Ü–î–ù–ò–ö</a>
        <a href="agent_ai.html" class="sys-btn">ü§ñ AI –ê–ì–ï–ù–¢</a>
    </div>

    <div class="panel">
        <h2 style="color:var(--olive); margin-top:0;">–ì–õ–û–ë–ê–õ–¨–ù–ò–ô –†–û–ó–í–Ü–î–ù–ò–ö</h2>
        <p style="color:#777; margin-bottom:20px;">–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –±–∞–∑–∏ —Ç–æ–≤–∞—Ä—ñ–≤ –¥–ª—è –æ–±—Ä–æ–±–∫–∏ AI</p>
        
        <select id="catSelect">
            <option value="–ï–Ω–µ—Ä–≥–æ–Ω–µ–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å">‚ö° –ï–Ω–µ—Ä–≥–æ–Ω–µ–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å</option>
            <option value="–°–º–∞—Ä—Ç—Ñ–æ–Ω–∏ —Ç–∞ –≥–∞–¥–∂–µ—Ç–∏">üì± –°–º–∞—Ä—Ç—Ñ–æ–Ω–∏ —Ç–∞ –≥–∞–¥–∂–µ—Ç–∏</option>
            <option value="–ü–æ–±—É—Ç–æ–≤–∞ —Ç–µ—Ö–Ω—ñ–∫–∞">üè† –ü–æ–±—É—Ç–æ–≤–∞ —Ç–µ—Ö–Ω—ñ–∫–∞</option>
            <option value="–ï–ª–µ–∫—Ç—Ä–æ—ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç">üî® –ï–ª–µ–∫—Ç—Ä–æ—ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç</option>
            <option value="–ö–æ–º–ø'—é—Ç–µ—Ä–Ω–∞ —Ç–µ—Ö–Ω—ñ–∫–∞">üíª –ö–æ–º–ø'—é—Ç–µ—Ä–Ω–∞ —Ç–µ—Ö–Ω—ñ–∫–∞</option>
        </select>
        
        <button class="btn" onclick="runGlobal()">–ó–Ü–ë–†–ê–¢–ò 1000 –¢–û–í–ê–†–Ü–í</button>
        
        <div id="log">> –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞... –û—á—ñ–∫—É–≤–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥–∏.</div>
        
        <a href="agent_ai.html" class="next-step">‚öôÔ∏è –ü–ï–†–ï–ô–¢–ò –î–û AI –û–ë–†–û–ë–ö–ò ‚Üí</a>
    </div>

    <script>
        const sb = supabase.createClient(CONFIG.SB_URL, CONFIG.SB_KEY);
        
        // –î—ñ–∞–ø–∞–∑–æ–Ω–∏ ID –¥–ª—è "—Å–ª—ñ–ø–æ–≥–æ" –ø–æ—à—É–∫—É (–ø—Ä–∏–±–ª–∏–∑–Ω—ñ)
        const ranges = {
            "–ï–Ω–µ—Ä–≥–æ–Ω–µ–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å": { s: 648000, p: "–ï–Ω–µ—Ä–≥–æ-–ª–æ—Ç" },
            "–°–º–∞—Ä—Ç—Ñ–æ–Ω–∏ —Ç–∞ –≥–∞–¥–∂–µ—Ç–∏": { s: 681000, p: "–ì–∞–¥–∂–µ—Ç-–ª–æ—Ç" },
            "–ü–æ–±—É—Ç–æ–≤–∞ —Ç–µ—Ö–Ω—ñ–∫–∞": { s: 650000, p: "–¢–µ—Ö–Ω—ñ–∫–∞-–ª–æ—Ç" },
            "–ï–ª–µ–∫—Ç—Ä–æ—ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç": { s: 620000, p: "–Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç-–ª–æ—Ç" },
            "–ö–æ–º–ø'—é—Ç–µ—Ä–Ω–∞ —Ç–µ—Ö–Ω—ñ–∫–∞": { s: 670000, p: "PC-–ª–æ—Ç" }
        };

        async function runGlobal() {
            const log = document.getElementById('log');
            const cat = document.getElementById('catSelect').value;
            const r = ranges[cat];
            
            log.innerHTML = `> –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó: ${cat}...`;
            
            // –ü–∞–∫–µ—Ç–Ω–∞ –≤—Å—Ç–∞–≤–∫–∞ –¥–ª—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ
            let batch = [];
            const BATCH_SIZE = 50; 

            for (let i = 0; i < 1000; i++) {
                const id = r.s + i;
                const url = `https://mta.ua/p-${id}`;
                
                // –í–ê–ñ–õ–ò–í–û: –ö–æ–¥—É—î–º–æ URL –¥–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ–≥–æ —Ä–µ–¥—ñ—Ä–µ–∫—Ç—É SalesDoubler
                const encodedUrl = encodeURIComponent(url);
                const deep = `https://rdr.salesdoubler.com.ua/rel/offer/3463?aff_id=111958&url=${encodedUrl}`;
                
                // –¢–∏–º—á–∞—Å–æ–≤–∏–π —à–ª—è—Ö (AI –∞–≥–µ–Ω—Ç –º–∞—î –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ —Ü–µ –ø—ñ–∑–Ω—ñ—à–µ)
                const img = `https://mta.ua/img/${id}/1.jpg`; 
                const price = Math.floor(Math.random() * 25000) + 1200; // –¢–∏–º—á–∞—Å–æ–≤–∞ —Ü—ñ–Ω–∞

                batch.push({ 
                    title: `${r.p} #${id}`, 
                    affiliate_url: deep, 
                    image_url: img, 
                    price: price, 
                    category: cat, 
                    is_processed_ai: false // –ü–æ–º—ñ—á–∞—î–º–æ —è–∫ "–ø–æ—Ç—Ä–µ–±—É—î –æ–±—Ä–æ–±–∫–∏"
                });

                if (batch.length === BATCH_SIZE) {
                    const { error } = await sb.from('products').insert(batch);
                    if (error) {
                        log.innerHTML += `<br><span style="color:red">–ü–æ–º–∏–ª–∫–∞ –ø–∞–∫–µ—Ç—É: ${error.message}</span>`;
                    } else {
                        log.innerHTML += `<br>‚úî –£—Å–ø—ñ—à–Ω–æ –¥–æ–¥–∞–Ω–æ –ø–∞–∫–µ—Ç (+${BATCH_SIZE} —à—Ç)...`;
                        log.scrollTop = log.scrollHeight; // –ê–≤—Ç–æ—Å–∫—Ä–æ–ª
                    }
                    batch = []; // –û—á–∏—Å—Ç–∫–∞ –ø–∞–∫–µ—Ç—É
                    // –ù–µ–≤–µ–ª–∏–∫–∞ –ø–∞—É–∑–∞ —â–æ–± –Ω–µ –ø–æ–∫–ª–∞—Å—Ç–∏ –±—Ä–∞—É–∑–µ—Ä
                    await new Promise(res => setTimeout(res, 100)); 
                }
            }
            
            // –î–æ–¥–∞—î–º–æ –∑–∞–ª–∏—à–æ–∫
            if (batch.length > 0) {
                await sb.from('products').insert(batch);
            }

            log.innerHTML += `<br><br>> ‚úÖ –ì–û–¢–û–í–û! 1000 —Ç–æ–≤–∞—Ä—ñ–≤ –¥–æ–¥–∞–Ω–æ –≤ —á–µ—Ä–≥—É.`;
            log.innerHTML += `<br>> –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ AI –ê–≥–µ–Ω—Ç–∞ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–ø–∏—Å—ñ–≤.`;
        }
    </script>
</body>
</html>
